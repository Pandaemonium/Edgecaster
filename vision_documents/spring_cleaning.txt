﻿SPRING CLEANING — ACTIONABLE PLAN
(Current Status: VisualProfile pipeline active, mirror-curse implemented,
metadata-driven abilities, unified TargetMode, hierarchical entities)

Legend: [CLEANUP] structural/no-behavior change  
        [BEHAVIOR] gameplay change  
        [VISION] long-term direction

===============================================================================
SLICE 1: Renderer / Input Untangle [CLEANUP] — COMPLETE ENOUGH
✓ ascii.py is draw-only  
✓ Input routed exclusively through GameInput → GameCommand  
✓ Lorenz logic removed from renderer  

Remaining:
- Minor overlay style cleanup in ascii.py

===============================================================================
SLICE 2: Ability Bar / Actions Overhaul [CLEANUP] — COMPLETE
✓ Metadata-driven ability bar  
✓ Actions declare icons, tooltips, config buttons  
✓ Ability sets derived dynamically from entity actions  

Next:
- Integrate class templates / origins into entity spawn path

===============================================================================
SLICE 3: Unified TargetMode [FOUNDATION COMPLETE]
✓ Tile, vertex, and look targeting unified  
✓ Mouse + keyboard symmetric  
✓ Look-mode inspect uses entity inheritance  

Next:
- Cone/line shapes  
- Ranged preview layers  
- Multi-step targeting for complex spells

===============================================================================
SLICE 4: Entity Inheritance System [NEW CORE]
✓ YAML-driven prototypes with parents  
✓ Description lookup via hierarchy  
✓ Runtime metadata unified  

Next:
- Add materials, AI flags, physiology  
- Begin standardizing combat stats in prototypes

===============================================================================
SLICE 5: Inventory Revamp [PARTIAL]
✓ Nested containers stable  
Remaining:
- Stacking, sorting, weight, filter modes  
- Integrate with panel-local UI pipeline

===============================================================================
SLICE 6: Visual Scene Pipeline [NEW FOUNDATION]
Goal: generalize UI rendering, enable rotation/mirroring/scale effects.

✓ visuals.py added  
✓ VisualProfile struct  
✓ apply_visual_panel + unproject_mouse implemented  
✓ PopupMenuScene, UrgentMessageScene, OptionsScene migrated  
✓ SceneManager + AsciiRenderer support global visual profiles (mirror curse)

Next:
- Migrate InventoryScene and DialogueScene fully to panel-local layout  
- Add debug toggles: rotate(+5°), alpha pulses, recursive distortions  
- Extend transform stack to dungeon rendering (optional wobble, holography)

===============================================================================
SLICE 7: Menu System Rework [CLEANUP — UPCOMING]
The current menu ecosystem is inconsistent in scale/layout.

Scheduled pass:
- Standardize layout pipeline (title → body → choices → footer)
- Normalize fonts, padding, border sizes
- Unify character creation, keybindings, custom rune menus
- Remove leftover ad-hoc coordinate math
- Use panel-local rendering everywhere

===============================================================================
SLICE 8: Data-Driven Everything [VISION]
- Expand prototypes with combat stats, resistances, materials  
- Behavior components (curious, brittle, fractal, volatile)  
- Procedural pantheons + lore through inheritance chains

===============================================================================
CURRENT TACTICAL FOCUS
→ Finish migration of all menus to panel-local layout  
→ Expand entity components  
→ Extend targeting modes  
→ Demonstrate more transform-based UI (clockwise inventory, mirror curse)
→ Generalize data about visual transforms like "ghostly" and "clockwise" and gather them somewhere external to game.py, possibly with "conditions".

------------------------------------------------------------------------------
The guiding principles:
Keep the geometry weird, keep responsibilities clean, keep progress incremental.
